<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>Финансы • iOS 26</title>
    
    <!-- iOS Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- Styles -->
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
    
    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <!-- Telegram Web App -->
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
</head>
<body>
    <!-- Loading Screen -->
    <div id="loading">
        <div class="loading-spinner"></div>
        <div class="loading-text">Загрузка приложения...</div>
    </div>

    <!-- Main Content -->
    <div id="main-content">
        <!-- Pages Container -->
        <div class="pages-container">
            
            <!-- === PAGE 1: PANEL === -->
            <div id="panel-page" class="page active">
                <!-- Balance Card -->
                <div class="balance-card" style="background: linear-gradient(135deg, var(--ios-blue) 0%, var(--ios-accent) 100%); border-radius: var(--border-radius-large); margin: var(--spacing-md); padding: var(--spacing-xl); text-align: center; box-shadow: var(--shadow-medium);">
                    <div style="font-size: 13px; opacity: 0.9; margin-bottom: var(--spacing-xs); font-weight: 500;">Общий баланс</div>
                    <div style="font-size: 42px; font-weight: 800; margin-bottom: var(--spacing-sm); letter-spacing: -1px;" id="balance">0 ₽</div>
                    <div style="font-size: 12px; opacity: 0.8;">Все ваши активы</div>
                </div>

                <!-- Incomes (Compact) -->
                <div class="category-section" style="margin: var(--spacing-md);">
                    <div class="section-header" style="display: flex; justify-content: space-between; align-items: center; margin-bottom: var(--spacing-sm); padding: 0 var(--spacing-xs);">
                        <div class="section-title" style="font-size: 17px; font-weight: 600; color: var(--ios-text-primary);">Доходы</div>
                        <button class="section-action" onclick="showAllCategories('income')" style="font-size: 15px; color: var(--ios-accent); background: none; border: none; cursor: pointer;">Все</button>
                    </div>
                    <div class="compact-category-grid" id="compact-income-categories">
                        <!-- Dynamic (3 max) -->
                    </div>
                    <button class="add-category-btn" onclick="showAddCategoryModal('income')" style="width: 100%; padding: 12px; background: var(--ios-surface); border: 1px dashed rgba(255, 255, 255, 0.2); border-radius: var(--border-radius); color: var(--ios-text-secondary); font-size: 14px; cursor: pointer; display: flex; align-items: center; justify-content: center; gap: 8px; margin-top: 4px; transition: all var(--transition-fast);">
                        <span>+</span>
                        <span>Добавить категорию</span>
                    </button>
                </div>

                <!-- Expenses (Compact) -->
                <div class="category-section" style="margin: var(--spacing-md);">
                    <div class="section-header" style="display: flex; justify-content: space-between; align-items: center; margin-bottom: var(--spacing-sm); padding: 0 var(--spacing-xs);">
                        <div class="section-title" style="font-size: 17px; font-weight: 600; color: var(--ios-text-primary);">Расходы</div>
                        <button class="section-action" onclick="showAllCategories('expense')" style="font-size: 15px; color: var(--ios-accent); background: none; border: none; cursor: pointer;">Все</button>
                    </div>
                    <div class="compact-category-grid" id="compact-expense-categories">
                        <!-- Dynamic (3 max) -->
                    </div>
                    <button class="add-category-btn" onclick="showAddCategoryModal('expense')" style="width: 100%; padding: 12px; background: var(--ios-surface); border: 1px dashed rgba(255, 255, 255, 0.2); border-radius: var(--border-radius); color: var(--ios-text-secondary); font-size: 14px; cursor: pointer; display: flex; align-items: center; justify-content: center; gap: 8px; margin-top: 4px; transition: all var(--transition-fast);">
                        <span>+</span>
                        <span>Добавить категорию</span>
                    </button>
                </div>

                <!-- Wallets (Compact) -->
                <div class="category-section" style="margin: var(--spacing-md);">
                    <div class="section-header" style="display: flex; justify-content: space-between; align-items: center; margin-bottom: var(--spacing-sm); padding: 0 var(--spacing-xs);">
                        <div class="section-title" style="font-size: 17px; font-weight: 600; color: var(--ios-text-primary);">Кошельки</div>
                        <button class="section-action" onclick="showAllWallets()" style="font-size: 15px; color: var(--ios-accent); background: none; border: none; cursor: pointer;">Все</button>
                    </div>
                    <div class="compact-category-grid" id="compact-wallet-categories">
                        <!-- Dynamic (3 max) -->
                    </div>
                    <button class="add-category-btn" onclick="showAddWalletModal()" style="width: 100%; padding: 12px; background: var(--ios-surface); border: 1px dashed rgba(255, 255, 255, 0.2); border-radius: var(--border-radius); color: var(--ios-text-secondary); font-size: 14px; cursor: pointer; display: flex; align-items: center; justify-content: center; gap: 8px; margin-top: 4px; transition: all var(--transition-fast);">
                        <span>+</span>
                        <span>Добавить кошелёк</span>
                    </button>
                </div>

                <!-- Recent Transactions -->
                <div class="recent-transactions" style="margin: var(--spacing-md);">
                    <div class="section-header" style="display: flex; justify-content: space-between; align-items: center; margin-bottom: var(--spacing-sm); padding: 0 var(--spacing-xs);">
                        <div class="section-title" style="font-size: 17px; font-weight: 600; color: var(--ios-text-primary);">Последние операции</div>
                        <button class="section-action" onclick="showAllTransactions()" style="font-size: 15px; color: var(--ios-accent); background: none; border: none; cursor: pointer;">Все</button>
                    </div>
                    <div id="recent-transactions-list">
                        <!-- Dynamic -->
                    </div>
                </div>
            </div>

            <!-- === PAGE 2: HISTORY === -->
            <div id="history-page" class="page">
                <!-- Month Selector -->
                <div class="month-selector" style="display: flex; align-items: center; justify-content: space-between; padding: var(--spacing-md); background: var(--ios-surface); margin: var(--spacing-md); border-radius: var(--border-radius); border: 0.5px solid rgba(255, 255, 255, 0.05);">
                    <button class="month-nav" id="prev-month" style="width: 40px; height: 40px; border-radius: 20px; background: var(--ios-elevated); border: none; color: var(--ios-text-primary); font-size: 18px; cursor: pointer; display: flex; align-items: center; justify-content: center; transition: background var(--transition-fast);">←</button>
                    <div class="month-display" id="current-month" onclick="showCalendar()" style="font-size: 17px; font-weight: 600; color: var(--ios-text-primary); cursor: pointer; padding: 8px 16px; border-radius: var(--border-radius-small); transition: background var(--transition-fast);">февраль 2026</div>
                    <button class="month-nav" id="next-month" style="width: 40px; height: 40px; border-radius: 20px; background: var(--ios-elevated); border: none; color: var(--ios-text-primary); font-size: 18px; cursor: pointer; display: flex; align-items: center; justify-content: center; transition: background var(--transition-fast);">→</button>
                </div>

                <!-- Transactions List -->
                <div class="transactions-list" id="month-transactions" style="margin: 0 var(--spacing-md);">
                    <!-- Dynamic -->
                </div>
            </div>

            <!-- === PAGE 3: REPORT === -->
            <div id="report-page" class="page">
                <!-- Report Tabs -->
                <div class="report-tabs-container">
                    <div class="report-tabs-scroll">
                        <button class="report-tab-ios active" data-tab="overview">Обзор</button>
                        <button class="report-tab-ios" data-tab="income">Доходы</button>
                        <button class="report-tab-ios" data-tab="expense">Расходы</button>
                        <button class="report-tab-ios" data-tab="savings">Накопления</button>
                        <button class="report-tab-ios" data-tab="balance">Баланс</button>
                    </div>
                </div>

                <!-- Report Content -->
                <div class="report-content">
                    <!-- TAB 1: OVERVIEW -->
                    <div id="tab-overview" class="report-section active">
                        <!-- Total Balance -->
                        <div class="chart-container-ios">
                            <div class="chart-title-ios">Общий баланс</div>
                            <div style="text-align: center; padding: var(--spacing-lg);">
                                <div style="font-size: 48px; font-weight: 800; color: white; margin-bottom: var(--spacing-xs);" id="overview-balance">0 ₽</div>
                                <div style="font-size: 14px; color: var(--ios-text-secondary);">Ваш текущий баланс</div>
                            </div>
                        </div>

                        <!-- Ratio Chart -->
                        <div class="chart-container-ios">
                            <div class="chart-title-ios">Соотношение</div>
                            <div class="chart-wrapper-ios">
                                <canvas id="ratio-chart"></canvas>
                            </div>
                            <div class="chart-legend-ios" id="ratio-legend">
                                <!-- Dynamic -->
                            </div>
                        </div>
                    </div>

                    <!-- TAB 2: INCOME -->
                    <div id="tab-income" class="report-section">
                        <div class="chart-container-ios">
                            <div class="chart-title-ios">Доходы по категориям</div>
                            <div class="chart-wrapper-ios">
                                <canvas id="income-chart"></canvas>
                            </div>
                            <div class="chart-legend-ios" id="income-legend">
                                <!-- Dynamic -->
                            </div>
                        </div>
                    </div>

                    <!-- TAB 3: EXPENSE -->
                    <div id="tab-expense" class="report-section">
                        <div class="chart-container-ios">
                            <div class="chart-title-ios">Расходы по категориям</div>
                            <div class="chart-wrapper-ios">
                                <canvas id="expense-chart"></canvas>
                            </div>
                            <div class="chart-legend-ios" id="expense-legend">
                                <!-- Dynamic -->
                            </div>
                        </div>
                    </div>

                    <!-- TAB 4: SAVINGS -->
                    <div id="tab-savings" class="report-section">
                        <div class="chart-container-ios">
                            <div class="chart-title-ios">Накопления по целям</div>
                            <div class="chart-wrapper-ios">
                                <canvas id="savings-chart"></canvas>
                            </div>
                            <div class="chart-legend-ios" id="savings-legend">
                                <!-- Dynamic -->
                            </div>
                        </div>

                        <!-- Goals List -->
                        <div style="margin: var(--spacing-md);">
                            <div class="section-header" style="display: flex; justify-content: space-between; align-items: center; margin-bottom: var(--spacing-sm); padding: 0 var(--spacing-xs);">
                                <div class="section-title" style="font-size: 17px; font-weight: 600; color: var(--ios-text-primary);">Мои цели</div>
                                <button class="section-action" onclick="showAddGoalModal()" style="font-size: 15px; color: var(--ios-accent); background: none; border: none; cursor: pointer;">+</button>
                            </div>
                            <div id="goals-list">
                                <!-- Dynamic -->
                            </div>
                        </div>
                    </div>

                    <!-- TAB 5: BALANCE -->
                    <div id="tab-balance" class="report-section">
                        <!-- Dynamics Controls -->
                        <div class="dynamics-controls">
                            <button class="dynamics-period active" data-period="days">Дни</button>
                            <button class="dynamics-period" data-period="weeks">Недели</button>
                            <button class="dynamics-period" data-period="months">Месяцы</button>
                        </div>

                        <!-- Dynamics Chart -->
                        <div class="chart-container-ios">
                            <div class="chart-title-ios">Динамика баланса</div>
                            <div class="chart-wrapper-ios">
                                <canvas id="dynamics-chart"></canvas>
                            </div>
                        </div>

                        <!-- Distribution Chart -->
                        <div class="chart-container-ios">
                            <div class="chart-title-ios">Распределение по кошелькам</div>
                            <div class="chart-wrapper-ios">
                                <canvas id="distribution-chart"></canvas>
                            </div>
                            <div class="chart-legend-ios" id="distribution-legend">
                                <!-- Dynamic -->
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- === PAGE 4: SERVICES === -->
            <div id="services-page" class="page">
                <div class="services-section" style="margin: var(--spacing-md);">
                    <!-- Currency -->
                    <div class="service-card" style="background: var(--ios-surface); border-radius: var(--border-radius); padding: var(--spacing-lg); margin-bottom: var(--spacing-md); border: 0.5px solid rgba(255, 255, 255, 0.05);">
                        <div class="service-title" style="font-size: 17px; font-weight: 600; margin-bottom: var(--spacing-md); color: var(--ios-text-primary);">Валюта</div>
                        <div class="currency-options" style="display: grid; grid-template-columns: repeat(2, 1fr); gap: var(--spacing-sm);">
                            <button class="currency-option active" data-currency="RUB" onclick="selectCurrency('RUB')" style="padding: var(--spacing-md); border: 1.5px solid var(--ios-elevated); border-radius: var(--border-radius-small); background: var(--ios-accent); color: white; font-size: 15px; font-weight: 500; cursor: pointer; display: flex; align-items: center; justify-content: center; gap: 8px;">
                                <span>₽</span> RUB
                            </button>
                            <button class="currency-option" data-currency="USD" onclick="selectCurrency('USD')" style="padding: var(--spacing-md); border: 1.5px solid var(--ios-elevated); border-radius: var(--border-radius-small); background: none; color: var(--ios-text-primary); font-size: 15px; font-weight: 500; cursor: pointer; display: flex; align-items: center; justify-content: center; gap: 8px;">
                                <span>$</span> USD
                            </button>
                            <button class="currency-option" data-currency="EUR" onclick="selectCurrency('EUR')" style="padding: var(--spacing-md); border: 1.5px solid var(--ios-elevated); border-radius: var(--border-radius-small); background: none; color: var(--ios-text-primary); font-size: 15px; font-weight: 500; cursor: pointer; display: flex; align-items: center; justify-content: center; gap: 8px;">
                                <span>€</span> EUR
                            </button>
                            <button class="currency-option" data-currency="GEL" onclick="selectCurrency('GEL')" style="padding: var(--spacing-md); border: 1.5px solid var(--ios-elevated); border-radius: var(--border-radius-small); background: none; color: var(--ios-text-primary); font-size: 15px; font-weight: 500; cursor: pointer; display: flex; align-items: center; justify-content: center; gap: 8px;">
                                <span>₾</span> GEL
                            </button>
                        </div>
                    </div>

                    <!-- Export -->
                    <div class="service-card" style="background: var(--ios-surface); border-radius: var(--border-radius); padding: var(--spacing-lg); margin-bottom: var(--spacing-md); border: 0.5px solid rgba(255, 255, 255, 0.05);">
                        <div class="service-title" style="font-size: 17px; font-weight: 600; margin-bottom: var(--spacing-md); color: var(--ios-text-primary);">Экспорт данных</div>
                        <div style="text-align: center; padding: 20px 0;">
                            <button class="modal-btn secondary" onclick="exportData()" style="width: 100%; padding: var(--spacing-md); border-radius: var(--border-radius); font-size: 16px; font-weight: 600; cursor: pointer; border: none; background: var(--ios-elevated); color: var(--ios-text-primary); transition: all var(--transition-fast);">
                                <i class="fas fa-download"></i> Экспорт в CSV
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Bottom Navigation -->
        <nav class="bottom-nav">
            <button class="nav-item active" data-page="panel">
                <span class="nav-icon"><i class="fas fa-chart-pie"></i></span>
                <span class="nav-label">Панель</span>
            </button>
            <button class="nav-item" data-page="history">
                <span class="nav-icon"><i class="fas fa-history"></i></span>
                <span class="nav-label">История</span>
            </button>
            <button class="nav-item" data-page="report">
                <span class="nav-icon"><i class="fas fa-chart-line"></i></span>
                <span class="nav-label">Отчёт</span>
            </button>
            <button class="nav-item" data-page="services">
                <span class="nav-icon"><i class="fas fa-cog"></i></span>
                <span class="nav-label">Сервисы</span>
            </button>
        </nav>

        <!-- Add Button (+) -->
        <button id="add-transaction-btn" class="add-button" style="position: fixed; bottom: 90px; right: 20px; width: 56px; height: 56px; background: var(--ios-accent); color: white; border: none; border-radius: 28px; font-size: 28px; font-weight: 300; cursor: pointer; display: flex; align-items: center; justify-content: center; box-shadow: 0 4px 20px rgba(10, 132, 255, 0.4); z-index: 900; transition: all var(--transition-normal);">
            <i class="fas fa-plus"></i>
        </button>

        <!-- Notification -->
        <div id="notification" class="notification" style="position: fixed; top: 20px; left: 50%; transform: translateX(-50%) translateY(-100px); background: var(--ios-surface); border: 0.5px solid rgba(255, 255, 255, 0.1); border-radius: var(--border-radius); padding: var(--spacing-md) var(--spacing-lg); color: var(--ios-text-primary); font-weight: 500; box-shadow: var(--shadow-floating); z-index: 3000; backdrop-filter: blur(20px); -webkit-backdrop-filter: blur(20px); transition: transform var(--transition-normal);"></div>
    </div>

    <!-- === MODALS === -->

    <!-- Add Transaction Modal -->
    <div id="add-transaction-modal" class="modal-overlay">
        <div class="modal-content">
            <div class="modal-header" style="margin-bottom: var(--spacing-lg);">
                <div class="modal-title" id="transaction-modal-title" style="font-size: 22px; font-weight: 700; color: var(--ios-text-primary); text-align: center;">Добавить доход</div>
            </div>
            
            <!-- Type Tabs (One Line) -->
            <div class="modal-tabs">
                <button class="modal-tab income active" data-type="income">
                    <span class="modal-tab-icon"><i class="fas fa-arrow-up"></i></span>
                    <span>Доход</span>
                </button>
                <button class="modal-tab expense" data-type="expense">
                    <span class="modal-tab-icon"><i class="fas fa-arrow-down"></i></span>
                    <span>Расход</span>
                </button>
                <button class="modal-tab savings" data-type="savings">
                    <span class="modal-tab-icon"><i class="fas fa-piggy-bank"></i></span>
                    <span>Накопить</span>
                </button>
            </div>
            
            <!-- Savings Target Selection (Hidden by Default) -->
            <div id="savings-target-container" style="display: none; margin-bottom: var(--spacing-lg);">
                <label class="form-label" style="display: block; margin-bottom: var(--spacing-sm); font-size: 15px; font-weight: 500; color: var(--ios-text-primary);">Куда накапливать?</label>
                <div style="display: flex; gap: 8px;">
                    <button id="savings-to-category" class="modal-btn secondary" style="flex: 1; padding: 12px; border: none; border-radius: var(--border-radius-small); background: var(--ios-accent); color: white; font-size: 14px; font-weight: 600; cursor: pointer;">В категорию</button>
                    <button id="savings-to-goal" class="modal-btn secondary" style="flex: 1; padding: 12px; border: none; border-radius: var(--border-radius-small); background: var(--ios-elevated); color: var(--ios-text-primary); font-size: 14px; font-weight: 600; cursor: pointer;">В цель</button>
                </div>
            </div>
            
            <form id="add-transaction-form">
                <div class="form-group" style="margin-bottom: var(--spacing-lg);">
                    <label class="form-label" style="display: block; margin-bottom: var(--spacing-sm); font-size: 15px; font-weight: 500; color: var(--ios-text-primary);">Сумма</label>
                    <div style="position: relative;">
                        <span style="position: absolute; left: 16px; top: 50%; transform: translateY(-50%); font-size: 17px; color: var(--ios-text-secondary);" id="modal-currency-symbol">₽</span>
                        <input type="number" class="form-input" id="transaction-amount" placeholder="0" min="1" step="1" required style="width: 100%; padding: var(--spacing-md); background: var(--ios-elevated); border: 1px solid var(--ios-elevated); border-radius: var(--border-radius-small); font-size: 17px; color: var(--ios-text-primary); transition: border-color var(--transition-fast); padding-left: 50px;">
                    </div>
                </div>
                
                <!-- Category/Goal Select -->
                <div class="form-group" style="margin-bottom: var(--spacing-lg);">
                    <label class="form-label" id="transaction-target-label">Категория</label>
                    <select class="form-select" id="transaction-category" required style="width: 100%; padding: var(--spacing-md); background: var(--ios-elevated); border: 1px solid var(--ios-elevated); border-radius: var(--border-radius-small); font-size: 17px; color: var(--ios-text-primary); cursor: pointer;">
                        <!-- Dynamic -->
                    </select>
                </div>
                
                <div class="form-group" style="margin-bottom: var(--spacing-lg);">
                    <label class="form-label">Кошелёк</label>
                    <select class="form-select" id="transaction-wallet" style="width: 100%; padding: var(--spacing-md); background: var(--ios-elevated); border: 1px solid var(--ios-elevated); border-radius: var(--border-radius-small); font-size: 17px; color: var(--ios-text-primary); cursor: pointer;">
                        <!-- Dynamic -->
                    </select>
                </div>
                
                <div class="form-group" style="margin-bottom: var(--spacing-lg);">
                    <label class="form-label">Примечание (необязательно)</label>
                    <input type="text" class="form-input" id="transaction-description" placeholder="Например: Зарплата за февраль" style="width: 100%; padding: var(--spacing-md); background: var(--ios-elevated); border: 1px solid var(--ios-elevated); border-radius: var(--border-radius-small); font-size: 17px; color: var(--ios-text-primary); transition: border-color var(--transition-fast);">
                </div>
                
                <div class="modal-actions" style="display: flex; gap: var(--spacing-md); margin-top: var(--spacing-xl);">
                    <button type="button" class="modal-btn secondary" onclick="closeModal('add-transaction-modal')" style="flex: 1; padding: var(--spacing-md); border-radius: var(--border-radius); font-size: 16px; font-weight: 600; cursor: pointer; border: none; background: var(--ios-elevated); color: var(--ios-text-primary); transition: all var(--transition-fast);">
                        Отмена
                    </button>
                    <button type="submit" class="modal-btn primary" style="flex: 1; padding: var(--spacing-md); border-radius: var(--border-radius); font-size: 16px; font-weight: 600; cursor: pointer; border: none; background: var(--ios-accent); color: white; transition: all var(--transition-fast);">
                        Добавить
                    </button>
                </div>
            </form>
        </div>
    </div>

    <!-- Add Category Modal -->
    <div id="add-category-modal" class="modal-overlay">
        <div class="modal-content">
            <div class="modal-header" style="margin-bottom: var(--spacing-lg);">
                <div class="modal-title" id="category-modal-title" style="font-size: 22px; font-weight: 700; color: var(--ios-text-primary); text-align: center;">Добавить категорию</div>
            </div>
            
            <form id="add-category-form">
                <div class="form-group" style="margin-bottom: var(--spacing-lg);">
                    <label class="form-label" style="display: block; margin-bottom: var(--spacing-sm); font-size: 15px; font-weight: 500; color: var(--ios-text-primary);">Название категории</label>
                    <input type="text" class="form-input" id="category-name-input" placeholder="Например: Кафе" maxlength="20" required style="width: 100%; padding: var(--spacing-md); background: var(--ios-elevated); border: 1px solid var(--ios-elevated); border-radius: var(--border-radius-small); font-size: 17px; color: var(--ios-text-primary); transition: border-color var(--transition-fast);">
                </div>
                
                <div class="form-group" style="margin-bottom: var(--spacing-lg);">
                    <label class="form-label" style="display: block; margin-bottom: var(--spacing-sm); font-size: 15px; font-weight: 500; color: var(--ios-text-primary);">Иконка</label>
                    <div class="icon-picker" id="icons-grid" style="display: grid; grid-template-columns: repeat(5, 1fr); gap: 10px; margin-bottom: var(--spacing-lg);">
                        <!-- Dynamic -->
                    </div>
                </div>
                
                <div class="modal-actions" style="display: flex; gap: var(--spacing-md); margin-top: var(--spacing-xl);">
                    <button type="button" class="modal-btn secondary" onclick="closeModal('add-category-modal')" style="flex: 1; padding: var(--spacing-md); border-radius: var(--border-radius); font-size: 16px; font-weight: 600; cursor: pointer; border: none; background: var(--ios-elevated); color: var(--ios-text-primary); transition: all var(--transition-fast);">
                        Отмена
                    </button>
                    <button type="submit" class="modal-btn primary" style="flex: 1; padding: var(--spacing-md); border-radius: var(--border-radius); font-size: 16px; font-weight: 600; cursor: pointer; border: none; background: var(--ios-accent); color: white; transition: all var(--transition-fast);">
                        Сохранить
                    </button>
                </div>
            </form>
        </div>
    </div>

    <!-- Add Wallet Modal -->
    <div id="add-wallet-modal" class="modal-overlay">
        <div class="modal-content">
            <div class="modal-header" style="margin-bottom: var(--spacing-lg);">
                <div class="modal-title" style="font-size: 22px; font-weight: 700; color: var(--ios-text-primary); text-align: center;">Добавить кошелёк</div>
            </div>
            
            <form id="add-wallet-form">
                <div class="form-group" style="margin-bottom: var(--spacing-lg);">
                    <label class="form-label" style="display: block; margin-bottom: var(--spacing-sm); font-size: 15px; font-weight: 500; color: var(--ios-text-primary);">Название кошелька</label>
                    <input type="text" class="form-input" id="wallet-name-input" placeholder="Например: Тинькофф" maxlength="20" required style="width: 100%; padding: var(--spacing-md); background: var(--ios-elevated); border: 1px solid var(--ios-elevated); border-radius: var(--border-radius-small); font-size: 17px; color: var(--ios-text-primary); transition: border-color var(--transition-fast);">
                </div>
                
                <div class="form-group" style="margin-bottom: var(--spacing-lg);">
                    <label class="form-label" style="display: block; margin-bottom: var(--spacing-sm); font-size: 15px; font-weight: 500; color: var(--ios-text-primary);">Начальный баланс</label>
                    <div style="position: relative;">
                        <span style="position: absolute; left: 16px; top: 50%; transform: translateY(-50%); font-size: 17px; color: var(--ios-text-secondary);" id="wallet-currency-symbol">₽</span>
                        <input type="number" class="form-input" id="wallet-balance-input" placeholder="0" min="0" step="1" value="0" style="width: 100%; padding: var(--spacing-md); background: var(--ios-elevated); border: 1px solid var(--ios-elevated); border-radius: var(--border-radius-small); font-size: 17px; color: var(--ios-text-primary); transition: border-color var(--transition-fast); padding-left: 50px;">
                    </div>
                </div>
                
                <div class="modal-actions" style="display: flex; gap: var(--spacing-md); margin-top: var(--spacing-xl);">
                    <button type="button" class="modal-btn secondary" onclick="closeModal('add-wallet-modal')" style="flex: 1; padding: var(--spacing-md); border-radius: var(--border-radius); font-size: 16px; font-weight: 600; cursor: pointer; border: none; background: var(--ios-elevated); color: var(--ios-text-primary); transition: all var(--transition-fast);">
                        Отмена
                    </button>
                    <button type="submit" class="modal-btn primary" style="flex: 1; padding: var(--spacing-md); border-radius: var(--border-radius); font-size: 16px; font-weight: 600; cursor: pointer; border: none; background: var(--ios-accent); color: white; transition: all var(--transition-fast);">
                        Добавить
                    </button>
                </div>
            </form>
        </div>
    </div>

    <!-- Add Goal Modal -->
    <div id="add-goal-modal" class="modal-overlay">
        <div class="modal-content">
            <div class="modal-header" style="margin-bottom: var(--spacing-lg);">
                <div class="modal-title" style="font-size: 22px; font-weight: 700; color: var(--ios-text-primary); text-align: center;">Новая цель</div>
            </div>
            
            <form id="add-goal-form">
                <div class="form-group" style="margin-bottom: var(--spacing-lg);">
                    <label class="form-label" style="display: block; margin-bottom: var(--spacing-sm); font-size: 15px; font-weight: 500; color: var(--ios-text-primary);">Название цели</label>
                    <input type="text" class="form-input" id="goal-name-input" placeholder="Например: Новый телефон" maxlength="30" required style="width: 100%; padding: var(--spacing-md); background: var(--ios-elevated); border: 1px solid var(--ios-elevated); border-radius: var(--border-radius-small); font-size: 17px; color: var(--ios-text-primary); transition: border-color var(--transition-fast);">
                </div>
                
                <div class="form-group" style="margin-bottom: var(--spacing-lg);">
                    <label class="form-label" style="display: block; margin-bottom: var(--spacing-sm); font-size: 15px; font-weight: 500; color: var(--ios-text-primary);">Целевая сумма</label>
                    <div style="position: relative;">
                        <span style="position: absolute; left: 16px; top: 50%; transform: translateY(-50%); font-size: 17px; color: var(--ios-text-secondary);" id="goal-currency-symbol">₽</span>
                        <input type="number" class="form-input" id="goal-target-amount" placeholder="0" min="1" step="1" required style="width: 100%; padding: var(--spacing-md); background: var(--ios-elevated); border: 1px solid var(--ios-elevated); border-radius: var(--border-radius-small); font-size: 17px; color: var(--ios-text-primary); transition: border-color var(--transition-fast); padding-left: 50px;">
                    </div>
                </div>
                
                <div class="modal-actions" style="display: flex; gap: var(--spacing-md); margin-top: var(--spacing-xl);">
                    <button type="button" class="modal-btn secondary" onclick="closeModal('add-goal-modal')" style="flex: 1; padding: var(--spacing-md); border-radius: var(--border-radius); font-size: 16px; font-weight: 600; cursor: pointer; border: none; background: var(--ios-elevated); color: var(--ios-text-primary); transition: all var(--transition-fast);">
                        Отмена
                    </button>
                    <button type="submit" class="modal-btn primary" style="flex: 1; padding: var(--spacing-md); border-radius: var(--border-radius); font-size: 16px; font-weight: 600; cursor: pointer; border: none; background: var(--ios-accent); color: white; transition: all var(--transition-fast);">
                        Создать цель
                    </button>
                </div>
            </form>
        </div>
    </div>

    <!-- Script -->
    <script src="{{ url_for('static', filename='script.js') }}"></script>
</body>
</html>