<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>–§–∏–Ω–∞–Ω—Å—ã ‚Ä¢ iOS 27</title>
    
    <!-- –°—Ç–∏–ª–∏ -->
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
    
    <!-- –°–∫—Ä–∏–ø—Ç—ã -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    
    <!-- –í–µ–∫—Ç–æ—Ä–Ω—ã–µ –∏–∫–æ–Ω–∫–∏ iOS -->
    <style>
        @font-face {
            font-family: 'SF Pro Icons';
            src: url('https://cdn.jsdelivr.net/npm/sf-font@1.0.0/SF-Pro-Icons.ttf') format('truetype');
        }
        .sf-icon {
            font-family: 'SF Pro Icons', -apple-system, BlinkMacSystemFont, sans-serif;
        }
    </style>
</head>
<body>
    <!-- –≠–∫—Ä–∞–Ω –∑–∞–≥—Ä—É–∑–∫–∏ (1.5 - –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–π) -->
    <div id="loading-screen" class="loading-screen">
        <div class="loading-logo">üí∞</div>
        <div class="loading-spinner"></div>
        <div class="loading-text">–ó–∞–≥—Ä—É–∑–∫–∞...</div>
    </div>

    <!-- –≠–∫—Ä–∞–Ω –æ—à–∏–±–∫–∏ -->
    <div id="error-screen" class="error-screen">
        <div class="error-icon">‚ö†Ô∏è</div>
        <div class="error-title">–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏</div>
        <div class="error-message" id="error-message">–ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞–≥—Ä—É–∑–∏—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ</div>
        <button class="retry-button" onclick="location.reload()">–ü–æ–≤—Ç–æ—Ä–∏—Ç—å</button>
    </div>

    <!-- –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ç–µ–Ω—Ç -->
    <div id="main-content" class="hidden">
        <!-- ==================== -->
        <!-- –ö–û–ù–¢–ï–ô–ù–ï–† –°–¢–†–ê–ù–ò–¶ -->
        <!-- ==================== -->
        <div class="pages-container">
            <!-- –°–¢–†–ê–ù–ò–¶–ê 1: –ü–ê–ù–ï–õ–¨ -->
            <div id="panel-page" class="page active">
                <div class="panel-content">
                    <!-- –û–±—â–∏–π –±–∞–ª–∞–Ω—Å -->
                    <div class="balance-summary">
                        <div class="balance-amount" id="total-balance">0 ‚ÇΩ</div>
                        <div class="balance-label">–û–±—â–∏–π –±–∞–ª–∞–Ω—Å</div>
                    </div>

                    <!-- –î–æ—Ö–æ–¥—ã -->
                    <div class="category-section">
                        <div class="section-header">
                            <h2 class="section-title">–î–æ—Ö–æ–¥—ã</h2>
                            <button class="section-action" onclick="showAllCategories('income')">–í—Å–µ</button>
                        </div>
                        <div class="category-grid" id="income-categories">
                            <!-- –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ –∑–∞–ø–æ–ª–Ω—è—é—Ç—Å—è -->
                        </div>
                        <button class="add-item-btn" onclick="showAddCategoryModal('income')">
                            <span class="sf-icon">ÙÄÖº</span>
                            <span>–î–æ–±–∞–≤–∏—Ç—å –∫–∞—Ç–µ–≥–æ—Ä–∏—é</span>
                        </button>
                    </div>

                    <!-- –†–∞—Å—Ö–æ–¥—ã -->
                    <div class="category-section">
                        <div class="section-header">
                            <h2 class="section-title">–†–∞—Å—Ö–æ–¥—ã</h2>
                            <button class="section-action" onclick="showAllCategories('expense')">–í—Å–µ</button>
                        </div>
                        <div class="category-grid" id="expense-categories">
                            <!-- –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ –∑–∞–ø–æ–ª–Ω—è—é—Ç—Å—è -->
                        </div>
                        <button class="add-item-btn" onclick="showAddCategoryModal('expense')">
                            <span class="sf-icon">ÙÄÖº</span>
                            <span>–î–æ–±–∞–≤–∏—Ç—å –∫–∞—Ç–µ–≥–æ—Ä–∏—é</span>
                        </button>
                    </div>

                    <!-- –ö–æ—à–µ–ª—å–∫–∏ -->
                    <div class="category-section">
                        <div class="section-header">
                            <h2 class="section-title">–ö–æ—à–µ–ª—å–∫–∏</h2>
                            <button class="section-action" onclick="showAllWallets()">–í—Å–µ</button>
                        </div>
                        <div class="category-grid" id="wallet-categories">
                            <!-- –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ –∑–∞–ø–æ–ª–Ω—è—é—Ç—Å—è -->
                        </div>
                        <button class="add-item-btn" onclick="showAddWalletModal()">
                            <span class="sf-icon">ÙÄÖº</span>
                            <span>–î–æ–±–∞–≤–∏—Ç—å –∫–æ—à–µ–ª—ë–∫</span>
                        </button>
                    </div>

                    <!-- –ù–∞–∫–æ–ø–ª–µ–Ω–∏—è -->
                    <div class="category-section">
                        <div class="section-header">
                            <h2 class="section-title">–ù–∞–∫–æ–ø–ª–µ–Ω–∏—è</h2>
                            <button class="section-action" onclick="showAllGoals()">–í—Å–µ</button>
                        </div>
                        <div class="goals-grid" id="goals-list">
                            <!-- –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ –∑–∞–ø–æ–ª–Ω—è—é—Ç—Å—è -->
                        </div>
                        <button class="add-item-btn" onclick="showAddGoalModal()">
                            <span class="sf-icon">ÙÄÖº</span>
                            <span>–î–æ–±–∞–≤–∏—Ç—å —Ü–µ–ª—å</span>
                        </button>
                    </div>

                    <!-- –ü–æ—Å–ª–µ–¥–Ω–∏–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ -->
                    <div class="recent-transactions">
                        <div class="section-header">
                            <h2 class="section-title">–ü–æ—Å–ª–µ–¥–Ω–∏–µ –æ–ø–µ—Ä–∞—Ü–∏–∏</h2>
                            <button class="section-action" onclick="showAllTransactions()">–í—Å–µ</button>
                        </div>
                        <div id="recent-transactions-container">
                            <!-- –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ –∑–∞–ø–æ–ª–Ω—è–µ—Ç—Å—è -->
                        </div>
                    </div>
                </div>
            </div>

            <!-- –°–¢–†–ê–ù–ò–¶–ê 2: –ò–°–¢–û–†–ò–Ø -->
            <div id="history-page" class="page">
                <div class="history-content">
                    <!-- –ó–∞–≥–æ–ª–æ–≤–æ–∫ —Å –º–µ—Å—è—Ü–µ–º -->
                    <div class="history-header">
                        <button class="month-nav" id="prev-month">
                            <span class="sf-icon">ÙÄÜâ</span>
                        </button>
                        <div class="month-display" onclick="showCalendar()">
                            <span id="current-month">–§–µ–≤—Ä–∞–ª—å 2026</span>
                        </div>
                        <button class="month-nav" id="next-month">
                            <span class="sf-icon">ÙÄÜä</span>
                        </button>
                    </div>

                    <!-- –§–∏–ª—å—Ç—Ä—ã -->
                    <div class="history-filters">
                        <button class="history-filter active" data-filter="all">–í—Å–µ</button>
                        <button class="history-filter" data-filter="income">–î–æ—Ö–æ–¥—ã</button>
                        <button class="history-filter" data-filter="expense">–†–∞—Å—Ö–æ–¥—ã</button>
                        <button class="history-filter" data-filter="savings">–ù–∞–∫–æ–ø–ª–µ–Ω–∏—è</button>
                    </div>

                    <!-- –°–ø–∏—Å–æ–∫ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π -->
                    <div id="history-transactions">
                        <!-- –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ –∑–∞–ø–æ–ª–Ω—è–µ—Ç—Å—è -->
                    </div>
                </div>
            </div>

            <!-- –°–¢–†–ê–ù–ò–¶–ê 3: –û–¢–ß–Å–¢ -->
            <div id="report-page" class="page">
                <div class="report-header">
                    <div class="report-tabs">
                        <button class="report-tab active" data-tab="overview">–û–±–∑–æ—Ä</button>
                        <button class="report-tab" data-tab="income">–î–æ—Ö–æ–¥—ã</button>
                        <button class="report-tab" data-tab="expense">–†–∞—Å—Ö–æ–¥—ã</button>
                        <button class="report-tab" data-tab="savings">–ù–∞–∫–æ–ø–ª–µ–Ω–∏—è</button>
                        <button class="report-tab" data-tab="balance">–ë–∞–ª–∞–Ω—Å</button>
                    </div>
                </div>

                <div class="report-content">
                    <!-- –í–ö–õ–ê–î–ö–ê –û–ë–ó–û–† -->
                    <div id="tab-overview" class="report-section active">
                        <!-- –û–±—â–∏–π –±–∞–ª–∞–Ω—Å -->
                        <div class="balance-summary">
                            <div class="balance-amount" id="report-balance">0 ‚ÇΩ</div>
                            <div class="balance-label">–û–±—â–∏–π –±–∞–ª–∞–Ω—Å</div>
                        </div>

                        <!-- –°–æ–æ—Ç–Ω–æ—à–µ–Ω–∏–µ –¥–æ—Ö–æ–¥—ã/—Ä–∞—Å—Ö–æ–¥—ã/–Ω–∞–∫–æ–ø–ª–µ–Ω–∏—è -->
                        <div class="ratio-chart-container">
                            <div class="ratio-chart-title">–°–æ–æ—Ç–Ω–æ—à–µ–Ω–∏–µ</div>
                            <div class="chart-wrapper">
                                <canvas id="ratio-chart"></canvas>
                            </div>
                            <div class="chart-legend" id="ratio-legend"></div>
                        </div>

                        <!-- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ -->
                        <div class="stats-grid">
                            <div class="stat-card">
                                <div class="stat-icon income">ÙÄÖ∂</div>
                                <div class="stat-info">
                                    <div class="stat-label">–î–æ—Ö–æ–¥—ã</div>
                                    <div class="stat-amount" id="stat-income">0 ‚ÇΩ</div>
                                </div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-icon expense">ÙÄÖ∑</div>
                                <div class="stat-info">
                                    <div class="stat-label">–†–∞—Å—Ö–æ–¥—ã</div>
                                    <div class="stat-amount" id="stat-expense">0 ‚ÇΩ</div>
                                </div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-icon savings">ÙÄêö</div>
                                <div class="stat-info">
                                    <div class="stat-label">–ù–∞–∫–æ–ø–ª–µ–Ω–∏—è</div>
                                    <div class="stat-amount" id="stat-savings">0 ‚ÇΩ</div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- –í–ö–õ–ê–î–ö–ê –î–û–•–û–î–´ -->
                    <div id="tab-income" class="report-section">
                        <div class="chart-container">
                            <div class="chart-title">–î–æ—Ö–æ–¥—ã –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º</div>
                            <div class="chart-wrapper">
                                <canvas id="income-chart"></canvas>
                            </div>
                            <div class="chart-legend" id="income-legend"></div>
                        </div>
                    </div>

                    <!-- –í–ö–õ–ê–î–ö–ê –†–ê–°–•–û–î–´ -->
                    <div id="tab-expense" class="report-section">
                        <div class="chart-container">
                            <div class="chart-title">–†–∞—Å—Ö–æ–¥—ã –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º</div>
                            <div class="chart-wrapper">
                                <canvas id="expense-chart"></canvas>
                            </div>
                            <div class="chart-legend" id="expense-legend"></div>
                        </div>
                    </div>

                    <!-- –í–ö–õ–ê–î–ö–ê –ù–ê–ö–û–ü–õ–ï–ù–ò–Ø -->
                    <div id="tab-savings" class="report-section">
                        <div class="chart-container">
                            <div class="chart-title">–†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –Ω–∞–∫–æ–ø–ª–µ–Ω–∏–π</div>
                            <div class="chart-wrapper">
                                <canvas id="savings-chart"></canvas>
                            </div>
                            <div class="chart-legend" id="savings-legend"></div>
                        </div>
                    </div>

                    <!-- –í–ö–õ–ê–î–ö–ê –ë–ê–õ–ê–ù–° -->
                    <div id="tab-balance" class="report-section">
                        <!-- –î–∏–Ω–∞–º–∏–∫–∞ –±–∞–ª–∞–Ω—Å–∞ -->
                        <div class="chart-container">
                            <div class="chart-title">–î–∏–Ω–∞–º–∏–∫–∞ –±–∞–ª–∞–Ω—Å–∞</div>
                            <div class="dynamics-controls">
                                <button class="dynamics-period active" data-period="days">–î–Ω–∏</button>
                                <button class="dynamics-period" data-period="week">–ù–µ–¥–µ–ª—è</button>
                                <button class="dynamics-period" data-period="month">–ú–µ—Å—è—Ü</button>
                            </div>
                            <div class="chart-wrapper">
                                <canvas id="balance-dynamics-chart"></canvas>
                            </div>
                        </div>

                        <!-- –ö–æ—à–µ–ª—å–∫–∏ -->
                        <div class="chart-container">
                            <div class="chart-title">–†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø–æ –∫–æ—à–µ–ª—å–∫–∞–º</div>
                            <div class="chart-wrapper">
                                <canvas id="wallets-chart"></canvas>
                            </div>
                            <div class="chart-legend" id="wallets-legend"></div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- –°–¢–†–ê–ù–ò–¶–ê 4: –ù–ê–°–¢–†–û–ô–ö–ò -->
            <div id="settings-page" class="page">
                <div class="settings-content">
                    <!-- –í–∞–ª—é—Ç–∞ -->
                    <div class="settings-section">
                        <h2 class="settings-title">–í–∞–ª—é—Ç–∞</h2>
                        <div class="currency-options">
                            <button class="currency-option active" data-currency="RUB" onclick="selectCurrency('RUB')">
                                <span>‚ÇΩ</span> RUB
                            </button>
                            <button class="currency-option" data-currency="USD" onclick="selectCurrency('USD')">
                                <span>$</span> USD
                            </button>
                            <button class="currency-option" data-currency="EUR" onclick="selectCurrency('EUR')">
                                <span>‚Ç¨</span> EUR
                            </button>
                            <button class="currency-option" data-currency="GEL" onclick="selectCurrency('GEL')">
                                <span>‚Çæ</span> GEL
                            </button>
                        </div>
                    </div>

                    <!-- –≠–∫—Å–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö -->
                    <div class="settings-section">
                        <h2 class="settings-title">–î–∞–Ω–Ω—ã–µ</h2>
                        <button class="settings-btn" onclick="exportData()">
                            <span class="settings-icon">ÙÄàÇ</span>
                            <span>–≠–∫—Å–ø–æ—Ä—Ç –≤ CSV</span>
                            <span class="sf-icon">ÙÄÜä</span>
                        </button>
                        <button class="settings-btn" onclick="clearAllData()">
                            <span class="settings-icon">ÙÄàë</span>
                            <span>–û—á–∏—Å—Ç–∏—Ç—å –≤—Å–µ –¥–∞–Ω–Ω—ã–µ</span>
                            <span class="sf-icon">ÙÄÜä</span>
                        </button>
                    </div>

                    <!-- –û –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ -->
                    <div class="settings-section">
                        <h2 class="settings-title">–û –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏</h2>
                        <div class="about-card">
                            <div class="about-logo">üí∞</div>
                            <div class="about-info">
                                <div class="about-name">–§–∏–Ω–∞–Ω—Å—ã</div>
                                <div class="about-version">–í–µ—Ä—Å–∏—è 3.0 ‚Ä¢ iOS 27 —Å—Ç–∏–ª—å</div>
                                <div class="about-description">–ú–∏–Ω–∏–º–∞–ª–∏—Å—Ç–∏—á–Ω—ã–π —Ñ–∏–Ω–∞–Ω—Å–æ–≤—ã–π –ø–æ–º–æ—â–Ω–∏–∫</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- ==================== -->
        <!-- –ù–ò–ñ–ù–Ø–Ø –ü–ê–ù–ï–õ–¨ –ù–ê–í–ò–ì–ê–¶–ò–ò -->
        <!-- ==================== -->
        <div class="bottom-nav-container">
            <nav class="bottom-nav">
                <button class="nav-item active" data-page="panel">
                    <span class="nav-icon sf-icon">ÙÄéû</span>
                    <span class="nav-label">–ü–∞–Ω–µ–ª—å</span>
                </button>
                <button class="nav-item" data-page="history">
                    <span class="nav-icon sf-icon">ÙÄê´</span>
                    <span class="nav-label">–ò—Å—Ç–æ—Ä–∏—è</span>
                </button>
                <button class="nav-item" data-page="report">
                    <span class="nav-icon sf-icon">ÙÄä´</span>
                    <span class="nav-label">–û—Ç—á—ë—Ç</span>
                </button>
                <button class="nav-item" data-page="settings">
                    <span class="nav-icon sf-icon">ÙÄçü</span>
                    <span class="nav-label">–ù–∞—Å—Ç—Ä–æ–π–∫–∏</span>
                </button>
            </nav>
        </div>

        <!-- –ö–ù–û–ü–ö–ê –î–û–ë–ê–í–õ–ï–ù–ò–Ø -->
        <button id="add-transaction-btn" class="add-button sf-icon">ÙÄÖº</button>

        <!-- –£–í–ï–î–û–ú–õ–ï–ù–ò–Ø -->
        <div id="notification" class="notification"></div>
    </div>

    <!-- ==================== -->
    <!-- –ú–û–î–ê–õ–¨–ù–´–ï –û–ö–ù–ê -->
    <!-- ==================== -->

    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ -->
    <div id="add-transaction-modal" class="modal-overlay">
        <div class="modal-content">
            <div class="modal-header">
                <div class="modal-title">–î–æ–±–∞–≤–∏—Ç—å –æ–ø–µ—Ä–∞—Ü–∏—é</div>
                <button class="modal-close" onclick="closeModal('add-transaction-modal')">
                    <span class="sf-icon">ÙÄÜÑ</span>
                </button>
            </div>
            
            <div class="modal-body">
                <!-- –í–∫–ª–∞–¥–∫–∏ —Ç–∏–ø–∞ (–≤ –æ–¥–Ω—É —Å—Ç—Ä–æ–∫—É) -->
                <div class="modal-tabs-compact">
                    <button class="modal-tab-compact income active" data-type="income">
                        <span class="tab-icon sf-icon">ÙÄÖ∂</span>
                        <span>–î–æ—Ö–æ–¥</span>
                    </button>
                    <button class="modal-tab-compact expense" data-type="expense">
                        <span class="tab-icon sf-icon">ÙÄÖ∑</span>
                        <span>–†–∞—Å—Ö–æ–¥</span>
                    </button>
                    <button class="modal-tab-compact savings" data-type="savings">
                        <span class="tab-icon sf-icon">ÙÄêö</span>
                        <span>–ù–∞–∫–æ–ø–ª–µ–Ω–∏—è</span>
                    </button>
                </div>

                <!-- –í—ã–±–æ—Ä —Ü–µ–ª–∏ –ø—Ä–∏ –Ω–∞–∫–æ–ø–ª–µ–Ω–∏—è—Ö (—Å–∫—Ä—ã—Ç–æ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é) -->
                <div id="savings-options-container" class="hidden">
                    <div class="form-group">
                        <label class="form-label">–¢–∏–ø –Ω–∞–∫–æ–ø–ª–µ–Ω–∏—è</label>
                        <div class="savings-options">
                            <button type="button" class="savings-option active" data-target="category">–ö–∞—Ç–µ–≥–æ—Ä–∏—è</button>
                            <button type="button" class="savings-option" data-target="goal">–¶–µ–ª—å</button>
                        </div>
                    </div>

                    <!-- –í—ã–±–æ—Ä —Ü–µ–ª–∏ -->
                    <div id="goal-select-container" class="hidden">
                        <div class="form-group">
                            <label class="form-label">–í—ã–±–µ—Ä–∏—Ç–µ —Ü–µ–ª—å</label>
                            <select class="form-select" id="goal-select">
                                <option value="">–í—ã–±–µ—Ä–∏—Ç–µ —Ü–µ–ª—å</option>
                                <!-- –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ –∑–∞–ø–æ–ª–Ω—è–µ—Ç—Å—è -->
                            </select>
                        </div>
                    </div>
                </div>

                <form id="add-transaction-form">
                    <!-- –°—É–º–º–∞ -->
                    <div class="form-group">
                        <label class="form-label">–°—É–º–º–∞</label>
                        <div class="currency-input">
                            <span class="currency-symbol" id="currency-symbol">‚ÇΩ</span>
                            <input type="number" class="form-input" id="transaction-amount" 
                                   placeholder="0" min="1" step="1" required>
                        </div>
                    </div>

                    <!-- –ö–∞—Ç–µ–≥–æ—Ä–∏—è (—Å–∫—Ä—ã–≤–∞–µ—Ç—Å—è –ø—Ä–∏ –≤—ã–±–æ—Ä–µ —Ü–µ–ª–∏) -->
                    <div id="category-group" class="form-group">
                        <label class="form-label">–ö–∞—Ç–µ–≥–æ—Ä–∏—è</label>
                        <select class="form-select" id="transaction-category" required>
                            <!-- –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ –∑–∞–ø–æ–ª–Ω—è–µ—Ç—Å—è -->
                        </select>
                    </div>

                    <!-- –ö–æ—à–µ–ª—ë–∫ -->
                    <div class="form-group">
                        <label class="form-label">–ö–æ—à–µ–ª—ë–∫</label>
                        <select class="form-select" id="transaction-wallet">
                            <!-- –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ –∑–∞–ø–æ–ª–Ω—è–µ—Ç—Å—è -->
                        </select>
                    </div>

                    <!-- –û–ø–∏—Å–∞–Ω–∏–µ -->
                    <div class="form-group">
                        <label class="form-label">–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ</label>
                        <input type="text" class="form-input" id="transaction-description" 
                               placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: –ó–∞—Ä–ø–ª–∞—Ç–∞ –∑–∞ —Ñ–µ–≤—Ä–∞–ª—å">
                    </div>

                    <!-- –î–∞—Ç–∞ -->
                    <div class="form-group">
                        <label class="form-label">–î–∞—Ç–∞</label>
                        <input type="datetime-local" class="form-input" id="transaction-date" 
                               value="{{ now }}">
                    </div>

                    <div class="modal-actions">
                        <button type="button" class="modal-btn secondary" 
                                onclick="closeModal('add-transaction-modal')">
                            –û—Ç–º–µ–Ω–∞
                        </button>
                        <button type="submit" class="modal-btn primary">
                            –î–æ–±–∞–≤–∏—Ç—å
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ -->
    <div id="add-category-modal" class="modal-overlay">
        <div class="modal-content">
            <div class="modal-header">
                <div class="modal-title" id="category-modal-title">–ù–æ–≤–∞—è –∫–∞—Ç–µ–≥–æ—Ä–∏—è</div>
                <button class="modal-close" onclick="closeModal('add-category-modal')">
                    <span class="sf-icon">ÙÄÜÑ</span>
                </button>
            </div>
            
            <div class="modal-body">
                <form id="add-category-form">
                    <div class="form-group">
                        <label class="form-label">–ù–∞–∑–≤–∞–Ω–∏–µ</label>
                        <input type="text" class="form-input" id="category-name" 
                               placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: –ö–∞—Ñ–µ" maxlength="20" required>
                    </div>

                    <div class="form-group">
                        <label class="form-label">–ò–∫–æ–Ω–∫–∞</label>
                        <div class="icon-picker" id="icon-picker">
                            <!-- –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ –∑–∞–ø–æ–ª–Ω—è–µ—Ç—Å—è -->
                        </div>
                    </div>

                    <div class="form-group">
                        <label class="form-label">–¶–≤–µ—Ç</label>
                        <div class="color-picker" id="color-picker">
                            <!-- –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ –∑–∞–ø–æ–ª–Ω—è–µ—Ç—Å—è -->
                        </div>
                    </div>

                    <div class="modal-actions">
                        <button type="button" class="modal-btn secondary" 
                                onclick="closeModal('add-category-modal')">
                            –û—Ç–º–µ–Ω–∞
                        </button>
                        <button type="submit" class="modal-btn primary">
                            –°–æ—Ö—Ä–∞–Ω–∏—Ç—å
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –∫–æ—à–µ–ª—å–∫–∞ -->
    <div id="add-wallet-modal" class="modal-overlay">
        <div class="modal-content">
            <div class="modal-header">
                <div class="modal-title">–ù–æ–≤—ã–π –∫–æ—à–µ–ª—ë–∫</div>
                <button class="modal-close" onclick="closeModal('add-wallet-modal')">
                    <span class="sf-icon">ÙÄÜÑ</span>
                </button>
            </div>
            
            <div class="modal-body">
                <form id="add-wallet-form">
                    <div class="form-group">
                        <label class="form-label">–ù–∞–∑–≤–∞–Ω–∏–µ</label>
                        <input type="text" class="form-input" id="wallet-name" 
                               placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: –¢–∏–Ω—å–∫–æ—Ñ—Ñ" maxlength="20" required>
                    </div>

                    <div class="form-group">
                        <label class="form-label">–ò–∫–æ–Ω–∫–∞</label>
                        <div class="icon-picker" id="wallet-icon-picker">
                            <!-- –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ –∑–∞–ø–æ–ª–Ω—è–µ—Ç—Å—è -->
                        </div>
                    </div>

                    <div class="form-group">
                        <label class="form-label">–ù–∞—á–∞–ª—å–Ω—ã–π –±–∞–ª–∞–Ω—Å</label>
                        <div class="currency-input">
                            <span class="currency-symbol">‚ÇΩ</span>
                            <input type="number" class="form-input" id="wallet-balance" 
                                   placeholder="0" min="0" step="1" value="0">
                        </div>
                    </div>

                    <div class="modal-actions">
                        <button type="button" class="modal-btn secondary" 
                                onclick="closeModal('add-wallet-modal')">
                            –û—Ç–º–µ–Ω–∞
                        </button>
                        <button type="submit" class="modal-btn primary">
                            –î–æ–±–∞–≤–∏—Ç—å
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è —Ü–µ–ª–∏ -->
    <div id="add-goal-modal" class="modal-overlay">
        <div class="modal-content">
            <div class="modal-header">
                <div class="modal-title">–ù–æ–≤–∞—è —Ü–µ–ª—å</div>
                <button class="modal-close" onclick="closeModal('add-goal-modal')">
                    <span class="sf-icon">ÙÄÜÑ</span>
                </button>
            </div>
            
            <div class="modal-body">
                <form id="add-goal-form">
                    <div class="form-group">
                        <label class="form-label">–ù–∞–∑–≤–∞–Ω–∏–µ —Ü–µ–ª–∏</label>
                        <input type="text" class="form-input" id="goal-name" 
                               placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: –ù–æ–≤—ã–π —Ç–µ–ª–µ—Ñ–æ–Ω" maxlength="30" required>
                    </div>

                    <div class="form-group">
                        <label class="form-label">–¶–µ–ª–µ–≤–∞—è —Å—É–º–º–∞</label>
                        <div class="currency-input">
                            <span class="currency-symbol">‚ÇΩ</span>
                            <input type="number" class="form-input" id="goal-target" 
                                   placeholder="0" min="1" step="1" required>
                        </div>
                    </div>

                    <div class="form-group">
                        <label class="form-label">–¢–µ–∫—É—â–∞—è —Å—É–º–º–∞</label>
                        <div class="currency-input">
                            <span class="currency-symbol">‚ÇΩ</span>
                            <input type="number" class="form-input" id="goal-current" 
                                   placeholder="0" min="0" step="1" value="0">
                        </div>
                    </div>

                    <div class="form-group">
                        <label class="form-label">–î–µ–¥–ª–∞–π–Ω</label>
                        <select class="form-select" id="goal-deadline">
                            <option value="">–ë–µ–∑ –¥–µ–¥–ª–∞–π–Ω–∞</option>
                            <option value="1month">1 –º–µ—Å—è—Ü</option>
                            <option value="3months">3 –º–µ—Å—è—Ü–∞</option>
                            <option value="6months">6 –º–µ—Å—è—Ü–µ–≤</option>
                            <option value="1year">1 –≥–æ–¥</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label class="form-label">–ò–∫–æ–Ω–∫–∞</label>
                        <div class="icon-picker" id="goal-icon-picker">
                            <!-- –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ –∑–∞–ø–æ–ª–Ω—è–µ—Ç—Å—è -->
                        </div>
                    </div>

                    <div class="form-group">
                        <label class="form-label">–¶–≤–µ—Ç</label>
                        <div class="color-picker" id="goal-color-picker">
                            <!-- –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ –∑–∞–ø–æ–ª–Ω—è–µ—Ç—Å—è -->
                        </div>
                    </div>

                    <div class="modal-actions">
                        <button type="button" class="modal-btn secondary" 
                                onclick="closeModal('add-goal-modal')">
                            –û—Ç–º–µ–Ω–∞
                        </button>
                        <button type="submit" class="modal-btn primary">
                            –°–æ–∑–¥–∞—Ç—å —Ü–µ–ª—å
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –≤—Å–µ—Ö –∫–∞—Ç–µ–≥–æ—Ä–∏–π -->
    <div id="all-categories-modal" class="modal-overlay">
        <div class="modal-content">
            <div class="modal-header">
                <div class="modal-title" id="all-categories-title">–í—Å–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏</div>
                <button class="modal-close" onclick="closeModal('all-categories-modal')">
                    <span class="sf-icon">ÙÄÜÑ</span>
                </button>
            </div>
            <div class="modal-body">
                <div id="all-categories-list">
                    <!-- –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ –∑–∞–ø–æ–ª–Ω—è–µ—Ç—Å—è -->
                </div>
            </div>
        </div>
    </div>

    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –≤—Å–µ—Ö —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π -->
    <div id="all-transactions-modal" class="modal-overlay">
        <div class="modal-content">
            <div class="modal-header">
                <div class="modal-title">–í—Å–µ –æ–ø–µ—Ä–∞—Ü–∏–∏</div>
                <button class="modal-close" onclick="closeModal('all-transactions-modal')">
                    <span class="sf-icon">ÙÄÜÑ</span>
                </button>
            </div>
            <div class="modal-body">
                <div id="all-transactions-list">
                    <!-- –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ –∑–∞–ø–æ–ª–Ω—è–µ—Ç—Å—è -->
                </div>
            </div>
        </div>
    </div>

    <!-- –ö–∞–ª–µ–Ω–¥–∞—Ä—å –≤—ã–±–æ—Ä–∞ –º–µ—Å—è—Ü–∞ -->
    <div id="calendar-modal" class="modal-overlay">
        <div class="modal-content">
            <div class="modal-header">
                <div class="modal-title">–í—ã–±–µ—Ä–∏—Ç–µ –º–µ—Å—è—Ü</div>
                <button class="modal-close" onclick="closeModal('calendar-modal')">
                    <span class="sf-icon">ÙÄÜÑ</span>
                </button>
            </div>
            <div class="modal-body">
                <div class="calendar-container">
                    <div class="calendar-header">
                        <button class="calendar-nav" onclick="changeCalendarYear(-1)">
                            <span class="sf-icon">ÙÄÜâ</span>
                        </button>
                        <div class="calendar-year" id="calendar-year">2026</div>
                        <button class="calendar-nav" onclick="changeCalendarYear(1)">
                            <span class="sf-icon">ÙÄÜä</span>
                        </button>
                    </div>
                    <div class="calendar-grid" id="calendar-grid">
                        <!-- –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ –∑–∞–ø–æ–ª–Ω—è–µ—Ç—Å—è -->
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="{{ url_for('static', filename='script.js') }}"></script>
</body>
</html>